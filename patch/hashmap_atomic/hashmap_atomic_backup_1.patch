diff --git a/nvml/src/examples/libpmemobj/map/data_store.c b/nvml/src/examples/libpmemobj/map/data_store.c
index 075bd88..5cc2e07 100755
--- a/nvml/src/examples/libpmemobj/map/data_store.c
+++ b/nvml/src/examples/libpmemobj/map/data_store.c
@@ -195,19 +195,22 @@ int main(int argc, const char *argv[]) {
 	int aborted = 0;
 
 	void *metadataVectorPtr[(nops>nkeys ? nops : nkeys)];
-	for (int i = 0; i < nops; i++) {
+	for (int i = 0; i < nops + 1; i++) {
 		metadataVectorPtr[i] = C_createMetadataVector();
 	}
 
+	NVTest_START;
 	gettimeofday(&tv_start, 0);
 	
 	//TX_BEGIN(pop) {
+		metadataPtr = metadataVectorPtr[nops];
 		map_new(mapc, &D_RW(root)->map, NULL);
+		C_execVeri(p, metadataPtr);
 
 		for (int i = 0; i < nops; ++i) {
 			/* new_store_item is transactional! */
 			metadataPtr = metadataVectorPtr[i];
-			NVTest_START;
+
 			if (strcmp("hashmap_atomic", type))
 				TX_CHECKER_START;
 			TX_BEGIN(pop) {
@@ -216,7 +219,7 @@ int main(int argc, const char *argv[]) {
 			} TX_END
 			if (strcmp("hashmap_atomic", type))
 				TX_CHECKER_END;
-			NVTest_END;
+
 			C_execVeri(p, metadataPtr);
 		}
 	//} TX_ONABORT {
@@ -224,6 +227,7 @@ int main(int argc, const char *argv[]) {
 	//	map_ctx_free(mapc);
 	//	aborted = 1;
 	//} TX_END
+	NVTest_END;
 
 
 	gettimeofday(&tv_end, 0);
